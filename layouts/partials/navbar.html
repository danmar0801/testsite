<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
  <div class="container">
    <!-- Brand -->
    <a class="navbar-brand fw-bold" href="{{ "/" | relURL }}">ViridianTechs</a>

    <!-- Toggler -->
    <button
      class="navbar-toggler collapsed"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNavDropdown"
      aria-controls="navbarNavDropdown"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="toggler-icon">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </span>
    </button>

    <!-- Nav Links -->
    <div class="collapse navbar-collapse" id="navbarNavDropdown">
      <ul class="navbar-nav ms-auto">

        <!-- Home -->
        <li class="nav-item">
          <a class="nav-link" href="{{ "/" | relURL }}">Home</a>
        </li>

        <!-- About -->
        <li class="nav-item">
          <a class="nav-link" href="{{ "about/" | relURL }}">About</a>
        </li>

        <!-- Services Dropdown -->
        <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle"
            href="{{ "services/" | relURL }}"
            id="navbarDropdown"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            Services <span class="service-arrow">▾</span>
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
            <li><a class="dropdown-item" href="{{ "services/csv/"   | relURL }}">CSV</a></li>
            <li><a class="dropdown-item" href="{{ "services/cqv/"   | relURL }}">CQV</a></li>
            <li><a class="dropdown-item" href="{{ "services/mes/"   | relURL }}">MES</a></li>
            <li><a class="dropdown-item" href="{{ "services/scada/" | relURL }}">SCADA</a></li>
          </ul>
        </li>

        <!-- Contact -->
        <li class="nav-item">
          <a class="nav-link" href="{{ "contact/" | relURL }}">Contact</a>
        </li>

      </ul>
    </div>
  </div>
</nav>

<style>
/* 1. Hide Bootstrap’s default caret */
.navbar-nav .dropdown-toggle::after {
  display: none !important;
}

/* 2. Underline hover */
.nav-link {
  position: relative;
  transition: color .3s ease;
}
.nav-link::after {
  content: '';
  position: absolute;
  bottom: 0; left: 0;
  width: 0; height: 2px;
  background: var(--viridian);
  transition: width .3s ease;
}
.nav-link:hover::after {
  width: 100%;
}

/* 3. Dropdown-on-hover (desktop) */
@media (min-width: 992px) {
  .nav-item.dropdown:hover .dropdown-menu {
    display: block;
    margin-top: 0;
  }
}

/* Green box around the dropdown menu */
.navbar-nav .dropdown-menu {
  border: 2px solid var(--viridian);
  border-radius: 0.5rem;
  background-color: #fff;
  padding: 0.5rem 0;  /* restore vertical padding */
  box-shadow: none;   /* remove default shadow if you like */
}

/* Keep the hover‑open behavior */
@media (min-width: 992px) {
  .nav-item.dropdown:hover .dropdown-menu {
    display: block;
    margin-top: 0;
  }
}

/* 5. Toggler → X animation */
.toggler-icon {
  display: inline-block;
  position: relative;
  width: 24px; height: 18px;
}
.toggler-icon .bar {
  position: absolute;
  width: 100%; height: 2px;
  background: var(--viridian-dark);
  left: 0;
  transition: transform .3s ease, opacity .3s ease, background .3s ease;
}
.toggler-icon .bar:nth-child(1) { top: 0; }
.toggler-icon .bar:nth-child(2) { top: 50%; transform: translateY(-50%); }
.toggler-icon .bar:nth-child(3) { bottom: 0; }

.navbar-toggler:not(.collapsed) .toggler-icon .bar:nth-child(1) {
  transform: rotate(45deg) translate(5px,5px);
  background: red;
}
.navbar-toggler:not(.collapsed) .toggler-icon .bar:nth-child(2) {
  opacity: 0;
}
.navbar-toggler:not(.collapsed) .toggler-icon .bar:nth-child(3) {
  transform: rotate(-45deg) translate(5px,-5px);
  background: red;
}

/* 6. Mobile adjustments */
@media (max-width: 991.98px) {
  .dropdown-menu {
    position: static !important;
    box-shadow: none; border: none;
  }
}
</style>
